<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>框架 | ++的手记</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/logo.png">
    <meta name="description" content="不积跬步，无以至千里">
    
<<<<<<< HEAD
    <link rel="preload" href="/assets/css/0.styles.dd347f4c.css" as="style"><link rel="preload" href="/assets/js/app.fbd254cd.js" as="script"><link rel="preload" href="/assets/js/2.64694daf.js" as="script"><link rel="preload" href="/assets/js/28.8645614b.js" as="script"><link rel="prefetch" href="/assets/js/10.a4bdeb23.js"><link rel="prefetch" href="/assets/js/11.ec2c4af3.js"><link rel="prefetch" href="/assets/js/12.f6109879.js"><link rel="prefetch" href="/assets/js/13.d27c4030.js"><link rel="prefetch" href="/assets/js/14.8db84945.js"><link rel="prefetch" href="/assets/js/15.8581e4cb.js"><link rel="prefetch" href="/assets/js/16.57b6573c.js"><link rel="prefetch" href="/assets/js/17.f12f2955.js"><link rel="prefetch" href="/assets/js/18.d6b2ea09.js"><link rel="prefetch" href="/assets/js/19.8be7c015.js"><link rel="prefetch" href="/assets/js/20.17c14f96.js"><link rel="prefetch" href="/assets/js/21.3614ac07.js"><link rel="prefetch" href="/assets/js/22.d9ae2466.js"><link rel="prefetch" href="/assets/js/23.af463bac.js"><link rel="prefetch" href="/assets/js/24.5ab8788b.js"><link rel="prefetch" href="/assets/js/25.baa1f02d.js"><link rel="prefetch" href="/assets/js/26.cd2a3fc4.js"><link rel="prefetch" href="/assets/js/27.1c60bcbb.js"><link rel="prefetch" href="/assets/js/29.ecfd408a.js"><link rel="prefetch" href="/assets/js/3.6088d17d.js"><link rel="prefetch" href="/assets/js/30.44f910ad.js"><link rel="prefetch" href="/assets/js/31.b26a7680.js"><link rel="prefetch" href="/assets/js/32.bcf03781.js"><link rel="prefetch" href="/assets/js/33.8b3c67ee.js"><link rel="prefetch" href="/assets/js/34.499f7f0c.js"><link rel="prefetch" href="/assets/js/35.25d82157.js"><link rel="prefetch" href="/assets/js/36.6616536c.js"><link rel="prefetch" href="/assets/js/37.28c4640d.js"><link rel="prefetch" href="/assets/js/38.0ab420f8.js"><link rel="prefetch" href="/assets/js/39.094265ea.js"><link rel="prefetch" href="/assets/js/4.47ab5979.js"><link rel="prefetch" href="/assets/js/40.d40a05e2.js"><link rel="prefetch" href="/assets/js/41.94b3cac4.js"><link rel="prefetch" href="/assets/js/42.0ae6f4ea.js"><link rel="prefetch" href="/assets/js/43.51b70d6f.js"><link rel="prefetch" href="/assets/js/44.57e5d64d.js"><link rel="prefetch" href="/assets/js/45.e7a59246.js"><link rel="prefetch" href="/assets/js/46.dc2e1168.js"><link rel="prefetch" href="/assets/js/5.d486fffc.js"><link rel="prefetch" href="/assets/js/6.a99e98d2.js"><link rel="prefetch" href="/assets/js/7.2ca92b87.js"><link rel="prefetch" href="/assets/js/8.f5ec443e.js"><link rel="prefetch" href="/assets/js/9.bcd73b97.js">
    <link rel="stylesheet" href="/assets/css/0.styles.dd347f4c.css">
=======
    <link rel="preload" href="/assets/css/0.styles.00470fc7.css" as="style"><link rel="preload" href="/assets/js/app.ffe38b4f.js" as="script"><link rel="preload" href="/assets/js/2.3efcfa25.js" as="script"><link rel="preload" href="/assets/js/26.455cfc07.js" as="script"><link rel="prefetch" href="/assets/js/10.b98e5830.js"><link rel="prefetch" href="/assets/js/11.1cd890eb.js"><link rel="prefetch" href="/assets/js/12.84cef485.js"><link rel="prefetch" href="/assets/js/13.9c8e4149.js"><link rel="prefetch" href="/assets/js/14.09ac9717.js"><link rel="prefetch" href="/assets/js/15.444feafe.js"><link rel="prefetch" href="/assets/js/16.0c8a5d8f.js"><link rel="prefetch" href="/assets/js/17.ac9a5021.js"><link rel="prefetch" href="/assets/js/18.63afc9e8.js"><link rel="prefetch" href="/assets/js/19.0ca098e2.js"><link rel="prefetch" href="/assets/js/20.d2ed0673.js"><link rel="prefetch" href="/assets/js/21.f84a6e43.js"><link rel="prefetch" href="/assets/js/22.d0e08203.js"><link rel="prefetch" href="/assets/js/23.649227ab.js"><link rel="prefetch" href="/assets/js/24.0e0522ff.js"><link rel="prefetch" href="/assets/js/25.140c5965.js"><link rel="prefetch" href="/assets/js/27.f16cad4d.js"><link rel="prefetch" href="/assets/js/28.1871ccb0.js"><link rel="prefetch" href="/assets/js/29.4fee03e5.js"><link rel="prefetch" href="/assets/js/3.c1cc9fb3.js"><link rel="prefetch" href="/assets/js/30.57327726.js"><link rel="prefetch" href="/assets/js/31.9c6476fd.js"><link rel="prefetch" href="/assets/js/32.b1addfc1.js"><link rel="prefetch" href="/assets/js/33.c018f42b.js"><link rel="prefetch" href="/assets/js/34.5b34a21f.js"><link rel="prefetch" href="/assets/js/35.009001ea.js"><link rel="prefetch" href="/assets/js/36.be3e35cc.js"><link rel="prefetch" href="/assets/js/37.30bcaf74.js"><link rel="prefetch" href="/assets/js/38.2a0b479a.js"><link rel="prefetch" href="/assets/js/39.c8f9e92e.js"><link rel="prefetch" href="/assets/js/4.ae792bde.js"><link rel="prefetch" href="/assets/js/40.c7e42f4f.js"><link rel="prefetch" href="/assets/js/41.ec25d47f.js"><link rel="prefetch" href="/assets/js/42.19d176ce.js"><link rel="prefetch" href="/assets/js/43.87869066.js"><link rel="prefetch" href="/assets/js/44.a1cdd87a.js"><link rel="prefetch" href="/assets/js/5.f7d66ce9.js"><link rel="prefetch" href="/assets/js/6.a0fae965.js"><link rel="prefetch" href="/assets/js/7.444b20ab.js"><link rel="prefetch" href="/assets/js/8.0dc5f6f6.js"><link rel="prefetch" href="/assets/js/9.8cc401fd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.00470fc7.css">
>>>>>>> ceefd0189b2bd0e88ffb3c6b673e7aa07f62c12c
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="++的手记" class="logo"> <span class="site-name can-hide">++的手记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java相关" class="dropdown-title"><span class="title">Java相关</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java相关" class="mobile-dropdown-title"><span class="title">Java相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/base/" class="nav-link">
  Java基础篇
</a></li><li class="dropdown-item"><!----> <a href="/java/advanced/" class="nav-link">
  JavaWeb框架篇
<<<<<<< HEAD
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶知识点" class="dropdown-title"><span class="title">进阶知识点</span> <span class="arrow down"></span></button> <button type="button" aria-label="进阶知识点" class="mobile-dropdown-title"><span class="title">进阶知识点</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/redis/" class="nav-link">
=======
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶知识点" class="dropdown-title"><span class="title">进阶知识点</span> <span class="arrow down"></span></button> <button type="button" aria-label="进阶知识点" class="mobile-dropdown-title"><span class="title">进阶知识点</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/redis/" class="nav-link">
>>>>>>> ceefd0189b2bd0e88ffb3c6b673e7aa07f62c12c
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/nginx/" class="nav-link">
  Ngnix
</a></li><li class="dropdown-item"><!----> <a href="/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/zookeeper/" class="nav-link">
  Zookeeper
</a></li><li class="dropdown-item"><!----> <a href="/questions/" class="nav-link router-link-active">
  面试题汇总
</a></li></ul></div></div><div class="nav-item"><a href="/ruankao/" class="nav-link">
  软考
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          博客指南
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://gitee.com/lzj0_0/lzj_blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java相关" class="dropdown-title"><span class="title">Java相关</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java相关" class="mobile-dropdown-title"><span class="title">Java相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/base/" class="nav-link">
  Java基础篇
</a></li><li class="dropdown-item"><!----> <a href="/java/advanced/" class="nav-link">
  JavaWeb框架篇
<<<<<<< HEAD
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶知识点" class="dropdown-title"><span class="title">进阶知识点</span> <span class="arrow down"></span></button> <button type="button" aria-label="进阶知识点" class="mobile-dropdown-title"><span class="title">进阶知识点</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/redis/" class="nav-link">
=======
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶知识点" class="dropdown-title"><span class="title">进阶知识点</span> <span class="arrow down"></span></button> <button type="button" aria-label="进阶知识点" class="mobile-dropdown-title"><span class="title">进阶知识点</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/redis/" class="nav-link">
>>>>>>> ceefd0189b2bd0e88ffb3c6b673e7aa07f62c12c
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/nginx/" class="nav-link">
  Ngnix
</a></li><li class="dropdown-item"><!----> <a href="/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/zookeeper/" class="nav-link">
  Zookeeper
</a></li><li class="dropdown-item"><!----> <a href="/questions/" class="nav-link router-link-active">
  面试题汇总
</a></li></ul></div></div><div class="nav-item"><a href="/ruankao/" class="nav-link">
  软考
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          博客指南
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://gitee.com/lzj0_0/lzj_blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/questions/notes/base.html" class="sidebar-link">Java基础</a></li><li><a href="/questions/notes/frame.html" aria-current="page" class="active sidebar-link">Java框架</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#spring是什么" class="sidebar-link">spring是什么</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#spring中bean是线程安全的吗" class="sidebar-link">Spring中Bean是线程安全的吗</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#spring的事务机制" class="sidebar-link">Spring的事务机制</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#什么时候-transactional会失效" class="sidebar-link">什么时候@Transactional会失效</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#spring事务回滚失败的场景-接上题" class="sidebar-link">Spring事务回滚失败的场景 (接上题)</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#spring中后置处理器的作用" class="sidebar-link">Spring中后置处理器的作用</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#spring如何解决循环依赖以及三级缓存概念" class="sidebar-link">Spring如何解决循环依赖以及三级缓存概念</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#spring创建bean对象的三种方式" class="sidebar-link">Spring创建bean对象的三种方式</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#spring创建bean-jvm创建类" class="sidebar-link">Spring创建bean，JVM创建类</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#说说常用的springboot注解-及其实现" class="sidebar-link">说说常用的SpringBoot注解，及其实现</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#数据库隔离的四个级别分别为" class="sidebar-link">数据库隔离的四个级别分别为</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#聚集索引和非聚集索引" class="sidebar-link">聚集索引和非聚集索引</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#mysql引擎之innodb" class="sidebar-link">MySQL引擎之innodb</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#innodb是如何实现事务的" class="sidebar-link">Innodb是如何实现事务的</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#多版本并发控制mvcc" class="sidebar-link">多版本并发控制MVCC</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#cas-会引起的问题" class="sidebar-link">CAS 会引起的问题</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#什么是copyonwrite容器" class="sidebar-link">什么是CopyOnWrite容器</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#synchronized锁升级的原理" class="sidebar-link">synchronized锁升级的原理</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#公平锁和非公平锁" class="sidebar-link">公平锁和非公平锁</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#什么是自动装箱和拆箱" class="sidebar-link">什么是自动装箱和拆箱</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#什么是b-树" class="sidebar-link">什么是B+树</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#什么是treemap" class="sidebar-link">什么是TreeMap</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#concurrenthashmap" class="sidebar-link">ConcurrentHashMap</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#什么是线程池" class="sidebar-link">什么是线程池</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#redis事务的概念" class="sidebar-link">Redis事务的概念</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#redis的数据结构及使用场景" class="sidebar-link">Redis的数据结构及使用场景</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#redis开启多线程后-是否会存在线程并发安全问题" class="sidebar-link">Redis开启多线程后，是否会存在线程并发安全问题</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#说说你了解的分布式锁实现" class="sidebar-link">说说你了解的分布式锁实现</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#mybatis的优缺点" class="sidebar-link">Mybatis的优缺点</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#和-的区别是什么" class="sidebar-link">#{}和${}的区别是什么</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#简述mybatis的插件运行原理-如何编写一个插件" class="sidebar-link">简述Mybatis的插件运行原理，如何编写一个插件</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#说说dubbo的分层" class="sidebar-link">说说Dubbo的分层</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#dubbo的工作原理" class="sidebar-link">Dubbo的工作原理</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#dubbo为什么要通过代理对象通信" class="sidebar-link">Dubbo为什么要通过代理对象通信</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#dubbo服务暴露的流程" class="sidebar-link">Dubbo服务暴露的流程</a></li><li class="sidebar-sub-header"><a href="/questions/notes/frame.html#dubbo服务引用的流程" class="sidebar-link">Dubbo服务引用的流程</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="框架"><a href="#框架" class="header-anchor">#</a> 框架</h1> <h2 id="spring是什么"><a href="#spring是什么" class="header-anchor">#</a> spring是什么</h2> <ul><li>轻量级的开源的J2EE框架。它是一个容器框架，用来装 java bean (java对象)，中间层框架(万能胶)可以起一个连接作用，比如说把Struts和hibernate粘合在一起运用，可以让我们的企业开发更快、更简洁</li> <li>Spring<strong>是一个轻量级的控制反转(IoC)和面向切面(AOP)的容器框架</strong> <ul><li>从大小与开销两方面而言Spring都是轻量级的</li> <li><strong>通过控制反转(IoC)的技术达到松耦合的目的</strong></li> <li><strong>提供了面向切面编程的丰富支持</strong>，允许通过分离应用的业务逻辑与系统级服务进行内聚性的开发</li> <li>包含并管理应用对象(Bean)的配置和生命周期，这个意义上是一个容器</li> <li>将简单的组件配置、组合成为复杂的应用，这个意义上是一个框架</li></ul></li></ul> <h2 id="spring中bean是线程安全的吗"><a href="#spring中bean是线程安全的吗" class="header-anchor">#</a> Spring中Bean是线程安全的吗</h2> <ul><li>Spring<strong>本身并没有针对Bean做线程安全的处理</strong>，所以：
<ol><li>如果Bean是<strong>无状态</strong>对象(Stateless Bean)，就是<strong>没有实例变量的对象，不能保存数据，是不变类</strong>，是<strong>线程安全</strong>的</li> <li>如果Bean是<strong>有状态</strong>对象(Stateful Bean)，就是<strong>有实例变量的对象 ，可以保存数据</strong>，是<strong>非线程安全</strong>的</li></ol></li> <li>另外，<strong>Bean是不是线程安全，跟Bean的作用域没有关系</strong>，Bean的作用域只是表示Bean的生命周期范围，对于任何生命周期的Bean都是一个对象，这个<strong>对象是不是线程安全的，还是得看这个Bean对象本身</strong></li></ul> <h2 id="spring的事务机制"><a href="#spring的事务机制" class="header-anchor">#</a> Spring的事务机制</h2> <ol><li>Spring事务<strong>底层是基于数据库事务和AOP机制</strong>的</li> <li>首先<strong>对于使用了<code>@Transactional</code>注解的Bean，Spring会创建一个Bean的代理对象</strong></li> <li>当<strong>调用代理对象的方法</strong>时，会<strong>先判断该方法上是否加了<code>@Transactional</code>注解</strong></li> <li>如果加了，那么则利用事务管理器<strong>创建一个数据库连接</strong></li> <li>并且修改数据库连接的<code>autocommit</code>属性为false，<strong>禁止此连接的自动提交</strong>，这是实现Spring事务非常重要的一步</li> <li>然后<strong>执行当前方法</strong>，方法中会<strong>执行sql</strong></li> <li>执行完当前方法后，如果<strong>没有出现异常就直接提交事务</strong></li> <li>如果<strong>出现了异常</strong>，并且这个<strong>异常是需要回滚的就会回滚事务，否则仍然提交事务</strong></li> <li><strong>Spring事务的隔离级别对应的就是数据库的隔离级别</strong></li> <li><strong>Spring事务的传播机制是Spring事务自己实现的</strong>，也是Spring事务中最复杂的</li> <li>Spring事务的传播机制是<strong>基于数据库连接来做的</strong>，一个数据库连接一个事务，如果<strong>传播机制配置为需要新开一个事务</strong>，那么<strong>实际上就是先建立一个数据库连接</strong>，在此新数据库连接上执行sql</li></ol> <h2 id="什么时候-transactional会失效"><a href="#什么时候-transactional会失效" class="header-anchor">#</a> 什么时候@Transactional会失效</h2> <ul><li>因为Spring事务是<strong>基于代理来实现的</strong>，所以某个加了<code>@Transactional</code>的方法<strong>只有是代理对象调用时，那么这个注解才会生效</strong>，所以所以如果是<strong>真实对象来调用</strong>这个方法，那么<code>@Transactional</code>是<strong>不会生效</strong>的</li> <li><code>@Transactional</code>注解<strong>只能应用到public修饰符上，其它修饰符不会获取<code>@Transactional</code>的属性配置信息</strong>，不会起作用，且<strong>不会有任何报错</strong></li> <li><code>@Transactional</code>配置有错误</li> <li>数据库引擎不支持事务</li> <li><strong>同一个类中方法调用</strong>，导致@Transactional失效：开发中避免不了会对<strong>同一个类里面的方法调用</strong>，比如有一个类Test，它的一个方法A，<strong>A再调用本类的方法B</strong>（不论方法B是用public还是private修饰），但<strong>方法A没有声明注解事务</strong>，而<strong>B方法有</strong>。则外部调用方法A之后，<strong>方法B的事务是不会起作用的</strong></li></ul> <h2 id="spring事务回滚失败的场景-接上题"><a href="#spring事务回滚失败的场景-接上题" class="header-anchor">#</a> Spring事务回滚失败的场景 (接上题)</h2> <ul><li>Spring的默认事务机制，当出现unchecked异常时候回滚，checked异常的时候不会回滚。异常中unchecked异常包括error和runtime异常。需要try catch或向上抛出的异常，为checked异常比如IOException，也就是说<strong>程序抛出runtime异常的时候才会进行回滚，其他异常不回滚</strong></li> <li>可以配置设置<strong>所有异常回滚</strong>：<code>@Transactional(rollbackFor = { Exception.class })</code></li></ul> <p>当有<code>try catch</code>后<strong>捕获了异常，事务不会回滚</strong>。如果不得不在service层写<code>try catch</code> 需要catch后<strong>手动抛一个运行时异常</strong><code>throw new RuntimeException</code>让事务回滚</p> <h2 id="spring中后置处理器的作用"><a href="#spring中后置处理器的作用" class="header-anchor">#</a> Spring中后置处理器的作用</h2> <ul><li>Spring中的后置处理器分为BeanFactory后置处理器和Bean后置处理器，它们是Spring底层源码架构设计中非常重要的一种机制，同时<strong>开发者也可以利用这两种后置处理器来进行扩展</strong>。BeanFactory后置处理器表示针对BeanFactory的处理器，Spring启过程中，会先创建出BeanFactory实例，然后利用BeanFactory处理器来加工BeanFactory， 比如<strong>Spring的扫描就是基于BeanFactory后置处理器来实现的</strong>，而Bean后置处理器也类似，Spring在创建一个Bean的过程中，首先会实例化得到一个对象，然后再<strong>利用Bean后置处理器来对该实例对象进行加工</strong>，比如我们常说的<strong>依赖注入就是基于一个Bean后置处理器来实现的</strong>，通过该Bean后置处理器来给实例对象中加了@Autowired注解的属性自动赋值，还比如我们常说的<strong>AOP，也是利用一个Bean后置处理器来实现的</strong>，基于原实例对象，判断是否需要进行AOP，如果需要，那么就基于原实例对象进行动态代理。生成一个代理对象</li></ul> <h2 id="spring如何解决循环依赖以及三级缓存概念"><a href="#spring如何解决循环依赖以及三级缓存概念" class="header-anchor">#</a> Spring如何解决循环依赖以及三级缓存概念</h2> <ul><li><p>Spring循环依赖的理论依据其实是<strong>Java基于引用传递</strong>，当我们<strong>获取到对象的引用时</strong>，对象的<strong>field或者或属性是可以延后设置</strong>的</p></li> <li><p>Spring单例对象的初始化其实可以分为三步：(<strong>实例化、填充属性、初始化</strong>)</p></li> <li><p>对于<strong>单例对象</strong>来说，在Spring的整个容器的生命周期内，有且只存在一个对象，这个<strong>对象存在Cache</strong>中，Spring大量运用了Cache的手段，在循环依赖问题的解决过程中甚至使用了&quot;三级缓存&quot;</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/** Cache of singleton objects: bean name --&gt; bean instance */</span>
<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> singletonObjects <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/** Cache of early singleton objects: bean name --&gt; bean instance */</span>
<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> earlySingletonObjects <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/** Cache of singleton factories: bean name --&gt; ObjectFactory */</span>
<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">ObjectFactory</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> singletonFactories <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">ObjectFactory</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>Spring用这三级缓存巧妙的解决了循环依赖问题</p> <ul><li><p><code>singletonObjects</code>一级缓存，用于<strong>保存实例化、注入、初始化完成的bean实例</strong></p></li> <li><p><code>earlySingletonObjects</code>二级缓存，用于<strong>保存实例化完成的bean实例</strong></p></li> <li><p><code>singletonFactories</code>三级缓存，用于<strong>保存bean创建工厂</strong>，以便于后面<strong>扩展有机会创建代理对象</strong></p> <p><img src="/%E9%9D%A2%E8%AF%95%E9%A2%98.assets/giuIlH-DkGpSm.png" alt="img"></p> <p><img src="/%E9%9D%A2%E8%AF%95%E9%A2%98.assets/v2-3b51599307d1477725afed3e091b7f09_r.jpg" alt="img"></p> <p><img src="/%E9%9D%A2%E8%AF%95%E9%A2%98.assets/v2-ea18dddbbf6c5626890c007eca9df23a_r.jpg" alt="img"></p></li> <li><p>第三级缓存中为什么要添加<code>ObjectFactory</code>对象，直接保存实例对象不行吗？</p> <ul><li>不行，因为假如你想对添加到三级缓存中的实例对象进行增强，直接用实例对象是行不通的</li> <li>或者所有对象都得被代理一遍</li></ul></li> <li><p>假设去掉二级缓存</p> <ul><li>如果去掉了二级缓存，则需要直接在 <code>singletonFactory.getObject()</code>三级缓存阶段初始化完毕，并放到一级缓存中</li> <li>那有这么一种场景，B 和 C 都依赖了 A。要知道在有代理的情况下 <code>singletonFactory.getObject()</code> 获取的是代理对象</li> <li>而<strong>多次调用 <code>singletonFactory.getObject()</code> 返回的代理对象是不同的</strong>，就会<strong>导致 B 和 C 依赖了不同的 A</strong></li></ul></li></ul></li></ul> <h2 id="spring创建bean对象的三种方式"><a href="#spring创建bean对象的三种方式" class="header-anchor">#</a> Spring创建bean对象的三种方式</h2> <ol><li><p>通过构造器(有参或无参)</p> <ul><li>方式：<code>&lt;bean id=&quot;&quot; class=&quot;&quot;/&gt;</code></li></ul></li> <li><p>通过静态工厂方法</p> <ul><li>方式：<code>&lt;bean id=&quot;&quot; class=&quot;工厂类&quot; factory-method=&quot;静态工厂方法&quot;/&gt;</code></li> <li>注：工厂类实例没有创建</li></ul></li> <li><p>通过实例工厂方法(非静态方法)</p> <ul><li><p>方式：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">&quot;factory&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;工厂类&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">&quot;&quot;</span> factory<span class="token operator">-</span>bean<span class="token operator">=</span><span class="token string">&quot;factory&quot;</span> factory<span class="token operator">-</span>method<span class="token operator">=</span><span class="token string">&quot;实例工厂方法&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>注：工厂类实例被创建</p></li></ul></li></ol> <h2 id="spring创建bean-jvm创建类"><a href="#spring创建bean-jvm创建类" class="header-anchor">#</a> Spring创建bean，JVM创建类</h2> <ul><li>spring：实例化-&gt;依赖注入-&gt;初始化</li> <li>JVM：加载-&gt;连接 (验证-&gt;准备-&gt;解析) -&gt;初始化</li> <li>其中spring bean 的<strong>实例化</strong>就包含了JVM对一个类的实例化过程</li></ul> <h2 id="说说常用的springboot注解-及其实现"><a href="#说说常用的springboot注解-及其实现" class="header-anchor">#</a> 说说常用的SpringBoot注解，及其实现</h2> <ul><li><code>@SpringBootApplication</code>注解：这个注解<strong>标识了一个SpringBoot工程</strong>，它实际上是另外三个注解的组合，这三个注解是：
<ol><li><code>@SpringBootConfiguration</code>：这个注解实际就是一个<code>@Configuration</code>，<strong>表示启动类也是一个配置类</strong></li> <li><code>@EnableAutoConfiguration</code>：<strong>启动自动装配</strong>，向Spring容器中导入了一个Selector，<strong>用来加载ClassPath下SpringFactories中所定义的自动配置类</strong>，将这些自动加载为配置Bean</li> <li><code>@ComponentScan</code>：<strong>标识扫描路径</strong>，因为默认是没有配置实际扫描路径，所以SpringBoot扫描的路径是<strong>启动类所在的当前目录</strong></li></ol></li> <li><code>@Bean</code>注解：<strong>用来定义Bean</strong>，类似于XML中的<code>&lt;bean&gt;</code>标签，Spring在启动时，会对加了@Bean注解的方法进行解析，将方法的名字做为beanName，并通过执行方法得到bean对象</li> <li><code>@Controller、@Service、@ResponseBody、@Autowired</code>都可以说</li></ul> <h2 id="数据库隔离的四个级别分别为"><a href="#数据库隔离的四个级别分别为" class="header-anchor">#</a> 数据库隔离的四个级别分别为</h2> <ul><li>Read Uncommitted（<strong>读取未提交内容</strong>）
<ul><li>在该隔离级别，所有事务都可以看到其他未提交事务的执行结果。本隔离级别很少用于实际应用，因为它的性能也不比其他级别好多少。读取未提交的数据，也被称之为脏读（Dirty Read）</li></ul></li> <li>Read Committed（<strong>读取提交内容</strong>）
<ul><li>这是大多数数据库系统的默认隔离级别（但不是MySQL默认的）。它满足了隔离的简单定义：一个事务只能看见已经提交事务所做的改变。这种隔离级别 也支持所谓的不可重复读（Nonrepeatable Read），因为同一事务的其他实例在该实例处理其间可能会有新的commit，所以同一select可能返回不同结果</li></ul></li> <li>Repeatable Read（<strong>可重读</strong>）
<ul><li>这是<strong>MySQL的默认事务隔离级别</strong>，它确保同一事务的多个实例在并发读取数据时，会看到同样的数据行。不过理论上，这会导致另一个棘手的问题：幻读 （Phantom Read）。简单的说，幻读指当用户读取某一范围的数据行时，另一个事务又在该范围内插入了新行，当用户再读取该范围的数据行时，会发现有新的“幻影” 行。InnoDB和Falcon存储引擎通过多版本并发控制（MVCC，Multiversion Concurrency Control）机制解决了该问题</li></ul></li> <li>Serializable（<strong>可串行化</strong>）
<ul><li>这是最高的隔离级别，它通过强制事务排序，使之不可能相互冲突，从而解决幻读问题。简言之，它是在每个读的数据行上加上共享锁。在这个级别，可能导致大量的超时现象和锁竞争</li></ul></li> <li>下表为事务的隔离级别与<strong>可能会引发的并发问题</strong></li></ul> <table><thead><tr><th>事务隔离级别</th> <th>脏读</th> <th>不可重复读</th> <th>幻读</th></tr></thead> <tbody><tr><td>读未提交(read-uncommitted)</td> <td>是</td> <td>是</td> <td>是</td></tr> <tr><td>读提交(read-committed)</td> <td>否</td> <td>是</td> <td>是</td></tr> <tr><td>可重复读(repeatable-read)</td> <td>否</td> <td>否</td> <td>是</td></tr> <tr><td>可串行化(serializable)</td> <td>否</td> <td>否</td> <td>否</td></tr></tbody></table> <h2 id="聚集索引和非聚集索引"><a href="#聚集索引和非聚集索引" class="header-anchor">#</a> 聚集索引和非聚集索引</h2> <ul><li>聚集索引：<strong>聚集索引确定表中数据在磁盘上的物理顺序</strong>。聚集索引类似于电话簿，后者按姓氏排列数据。由于聚集索引规定数据在表中的物理存储顺序，<strong>因此一个表只能包含一个聚集索引</strong></li> <li>非聚集索引：该索引中<strong>索引的逻辑顺序与磁盘上行的物理存储顺序不同</strong></li> <li>非聚集索引和聚集索引的区别在于， <strong>通过聚集索引可以查到需要查找的数据</strong>， 而<strong>通过非聚集索引可以查到记录对应的主键值 ， 再使用主键的值通过聚集索引查找到需要的数据</strong></li></ul> <h2 id="mysql引擎之innodb"><a href="#mysql引擎之innodb" class="header-anchor">#</a> MySQL引擎之innodb</h2> <ul><li><p>特点：</p> <ol><li>支持事务，<strong>支持4个事务隔离级别，支持MVCC</strong> (多版本并发控制：把数据库的行锁与行的多个版本结合起来，实现并发控制)</li> <li><strong>行级锁定</strong>（更新时一般是锁定当前行），<strong>通过索引实现</strong>，但<strong>全表扫描仍然会是表锁</strong>，注意间隙锁的影响</li> <li>读写阻塞与事务隔离级别相关</li> <li>具有非常高效的缓存特性：<strong>能缓存索引，也能缓存数据</strong></li> <li>整个表和<strong>主键以Cluster方式存储，组成一个平衡树</strong></li> <li>所有Secondary Index都会保存主键信息</li> <li>支持分区，表空间，类似oracle数据库</li> <li>支持外键约束，5.5之前不支持全文索引，5.5之后支持外键索引</li> <li>和Myisam引擎比，Innodb<strong>对硬件资源要求比较高</strong></li></ol></li></ul> <h2 id="innodb是如何实现事务的"><a href="#innodb是如何实现事务的" class="header-anchor">#</a> Innodb是如何实现事务的</h2> <ul><li>Innodb通过Buffer Pool，LogBuffer，Redo Log，Undo Log来实现事务，以一个update语句为例：
<ol><li>Innodb在收到一个update语句后，会<strong>先根据条件找到数据所在的页(行)，并将该页缓存在Buffer Pool中</strong></li> <li>执行update语句，<strong>修改Buffer Pool中的数据</strong>，也就是<strong>内存</strong>中的数据</li> <li>针对update语句<strong>生成一个RedoLog对象</strong>，并<strong>存入LogBuffer中</strong></li> <li>针对update语句<strong>生成undolog日志，用于事务回滚</strong></li> <li>如果<strong>事务提交</strong>，那么则<strong>把RedoLog对象进行持久化</strong>，后续<strong>还有其他机制将Buffer Pool中所修改的数据页持久化到磁盘中</strong></li> <li>如果<strong>事务回滚</strong>，则<strong>利用undolog日志进行回滚</strong></li></ol></li> <li>页是InnoDB存储引擎管理数据库的<strong>最小磁盘单位</strong>。页类型为B-tree node的页，存放的即是表中行的实际数据了</li> <li>简单来说：
<ol><li>收到update语句后，先<strong>根据条件找到数据所在的页(行)，并将该页缓存在内存中</strong></li> <li>然后执行update语句，<strong>修改缓存中的数据</strong></li> <li>再针对update语句<strong>生成一个对象，存入日志缓存中</strong></li> <li>再<strong>生成一个用于事务回滚的日志</strong></li> <li>如果事务<strong>提交</strong>，就<strong>把语句生成的对象持久化</strong></li> <li>如果事务<strong>回滚</strong>，则<strong>利用生成的回滚日志进行回滚</strong></li></ol></li></ul> <h2 id="多版本并发控制mvcc"><a href="#多版本并发控制mvcc" class="header-anchor">#</a> 多版本并发控制MVCC</h2> <ul><li>MVCC (Multi-Version Concurrency Control) 是InnoDB实现隔离级别的一种方式，用于实现读取已提交和可重复读两种隔离级别</li> <li>大多数事务型存储引擎实现都不是简单的行锁，基于并发性的考虑，一般会同时实现多版本并发控制（MVCC）处理读写冲突</li> <li>MVCC是<strong>乐观锁的一种实现</strong>，是通过<strong>保存数据在某一个时间点的快照</strong>实现的，<strong>写操作更新最新的版本，读操作读取旧版本</strong></li> <li>MVCC中事务的<strong>修改操作</strong>（增删改）会为行记录<strong>新增一个版本快照</strong>，并把当前事务id写入trx_id</li> <li>在可重复读的隔离级别下，Innodb使用MVCC和next-key locks解决幻读，<strong>MVCC解决的是普通读（快照读）的幻读，next-key locks解决的是当前读情况下的幻读</strong> <ul><li>普通读：普通的不加锁的select就是快照读。通过readview实现，可重复读级别时，整个事务的普通select都是使用同一个readview</li> <li>当前读：读取最新版本已提交的数据。就算其他事务版本大于当前事务，但其他事务只要提交了的数据，当前事务使用当前读是可以读取到其他事务提交的数据的。<strong>在可重复读的事务隔离级别下，数据库会使用next-key locks来锁住本条记录以及索引区间</strong></li></ul></li></ul> <h2 id="cas-会引起的问题"><a href="#cas-会引起的问题" class="header-anchor">#</a> CAS 会引起的问题</h2> <ul><li>ABA 问题
<ul><li>比如说一个线程 one 从内存位置 V 中取出 A ，这时另外一个线程 two 也从内存中取出 A ，并且 two 进行了一些操作变成了 B ，然后 two 又将 V 位置的数据变成 A，这时线程 one 进行 CAS 操作发现内存中仍然是 A，然后 one 操作成功，但是，A 已经不再是原来的 A ，可能存在一些潜在的问题</li> <li>java使用原子引用解决ABA问题
<ul><li>在原子引用上使用带时间戳的原子引用类。即<code>AtomicStampedReference</code>类</li></ul></li> <li>redis中的CAS已经通过判断数据版本解决了ABA问题</li></ul></li> <li>循环时间长开销大
<ul><li>CAS<strong>自旋的概率比较大</strong>，从而浪费更多的 CPU 资源，效率可能低于synchronized</li></ul></li> <li>只能保证一个共享变量的原子操作
<ul><li>当对一个共享变量执行操作时，我们可以使用循环 CAS 的发方式来保证原子操作，但是对于多个共享变量操作时，循环 CAS 就无法保证操作的原子性，这个时候就可以用锁</li></ul></li></ul> <h2 id="什么是copyonwrite容器"><a href="#什么是copyonwrite容器" class="header-anchor">#</a> 什么是CopyOnWrite容器</h2> <ul><li>CopyOnWrite容器即写时复制的容器。通俗的理解是<strong>当我们往一个容器添加元素的时候，不直接往当前容器添加，而是先将当前容器进行Copy，复制出一个新的容器，然后新的容器里添加元素，添加完元素之后，再将原容器的引用指向新的容器</strong>。这样做的好处是我们<strong>可以对CopyOnWrite容器进行并发的读，而不需要加锁</strong>，因为当前容器不会添加任何元素。所以CopyOnWrite容器也是一种读写分离的思想，读和写不同的容器</li> <li>读的时候不需要加锁，如果读的时候有多个线程正在向<code>CopyOnWriteArrayList</code>添加数据，读还是会读到旧的数据，因为开始读的那一刻已经确定了读的对象是旧对象。CopyOnWrite并发容器<strong>适用于读多写少的并发场景</strong></li> <li><code>CopyOnWriteArrayList</code><strong>读取时不加锁，只是写入、删除、修改时加锁</strong></li> <li>CopyOnWrite的缺点
<ul><li><strong>内存占用问题</strong>。因为CopyOnWrite的写时复制机制，所以在进行写操作的时候，内存里会同时驻扎两个对象的内存，旧的对象和新写入的对象</li> <li><strong>数据一致性问题</strong>。CopyOnWrite容器只能保证数据的最终一致性，不能保证数据的实时一致性。所以如果你希望写入的的数据，马上能读到，请不要使用CopyOnWrite容器。<strong>当执行add或remove操作没完成时，get获取的仍然是旧数组的元素</strong></li></ul></li></ul> <h2 id="synchronized锁升级的原理"><a href="#synchronized锁升级的原理" class="header-anchor">#</a> synchronized锁升级的原理</h2> <table><thead><tr><th>锁</th> <th>优点</th> <th>缺点</th> <th>适用场景</th></tr></thead> <tbody><tr><td>偏向锁</td> <td>加锁和解锁不需要额外的消耗，和执行非同步方法比仅存在纳秒级的差距</td> <td>如果线程间存在锁竞争，会带来额外的锁撤销的消耗</td> <td>适用于只有一个线程访问同步块场景</td></tr> <tr><td>轻量级锁</td> <td>竞争的线程不会阻塞，提高了程序的响应速度</td> <td>如果始终得不到锁竞争的线程使用自旋会消耗CPU</td> <td>追求响应时间。同步块执行速度非常快</td></tr> <tr><td>重量级锁</td> <td>线程竟争不使用自旋，不会消耗CPU</td> <td>线程阻塞，响应时间缓慢</td> <td>追求吞吐量。同步块执行速度较长</td></tr></tbody></table> <ul><li>所谓的锁升级、降级，就是 JVM 优化 synchronized 运行的机制，<strong>当 JVM 监测到不同的竞争状况时</strong>，会自动切换到不同的锁实现。这种切换就是锁的升级、降级</li> <li>当没有竞争出现时，<strong>默认会使用偏向锁</strong>。JVM 会<strong>利用 CAS 操作</strong>（compare and swap），在<strong>对象头上的 Mark Word 部分设置线程 ID</strong>，以<strong>表示这个对象偏向于当前线程</strong>，所以并不涉及真正的互斥锁。这样做的假设是基于在很多应用场景中，大部分对象生命周期中最多会被一个线程锁定，<strong>使用偏向锁可以降低无竞争开销</strong>。如果<strong>有另外的线程试图锁定某个已经被偏向过的对象，JVM 就需要撤销（revoke）偏斜锁</strong>，并<strong>切换到轻量级锁</strong>实现。轻量级锁<strong>依赖 CAS 操作 Mark Word 来试图获取锁</strong>，如果重试成功，就使用普通的轻量级锁；否则<strong>自旋一定次数后，进一步升级为重量级锁</strong></li></ul> <h2 id="公平锁和非公平锁"><a href="#公平锁和非公平锁" class="header-anchor">#</a> 公平锁和非公平锁</h2> <ul><li>简单的来说，<strong>公平锁的含义就是谁等的时间最长，谁就先获取锁</strong>，<strong>非公平锁</strong>那就<strong>随机的获取</strong>，谁运气好，CPU时间片轮到哪个线程，哪个线程就能获取锁</li> <li>那如何能保证每个线程都能拿到锁呢，<strong>队列FIFO是一个完美的解决方案，也就是先进先出</strong>，java的<code>ReenTrantLock</code>也就是用队列实现的公平锁和非公平锁</li> <li>优缺点：
<ul><li>非公平锁性能高于公平锁性能。首先，在<strong>恢复一个被挂起的线程与该线程真正运行之间存在着严重的延迟</strong>。而且，<strong>非公平锁能更充分的利用CPU的时间片</strong>，尽量的减少CPU空闲的状态时间</li></ul></li> <li>使用场景：
<ul><li>如果业务中<strong>线程占用(处理)时间要远长于线程等待</strong>，那用<strong>非公平锁其实效率并不明显</strong>，但是<strong>用公平锁会给业务增强很多的可控制性</strong></li></ul></li></ul> <h2 id="什么是自动装箱和拆箱"><a href="#什么是自动装箱和拆箱" class="header-anchor">#</a> 什么是自动装箱和拆箱</h2> <ul><li>在Java SE5之前，如果要生成一个数值为10的Integer对象，必须这样进行<code>Integer i = new Integer(10);</code></li> <li>而在从Java SE5开始就提供了自动装箱的特性，如果要生成一个数值为10的Integer对象，只需要这样就可以了<code>Integer i = 10;</code></li> <li>这个过程会自动根据数值的类型创建Integer对象，则就是<strong>自动装箱</strong>，同理
<ul><li><code>Integer i = 10;	int j = i;</code>，这是<strong>自动拆箱</strong>，将Integer对象自动拆箱为int</li></ul></li></ul> <h2 id="什么是b-树"><a href="#什么是b-树" class="header-anchor">#</a> 什么是B+树</h2> <ul><li>m叉的多路平衡查找树</li></ul> <h2 id="什么是treemap"><a href="#什么是treemap" class="header-anchor">#</a> 什么是TreeMap</h2> <ul><li>TreeMap是java实现的红黑树数据结构，能比较元素大小的Map集合，<strong>会对传入的key进行了大小排序</strong>。其中，可以使用元素的自然顺序，也可以使用集合中自定义的比较器来进行排序</li> <li>TreeMap 默认排序规则：<strong>按照key的字典顺序来排序(升序)</strong></li> <li>TreeMap实现倒序排序，TreeMap中的<code>descendingMap()</code>可实现</li> <li>TreeMap实现根据value排序，TreeMap的<code>entrySet</code>返回的值用<code>list</code>存储，然后使用<code>Collections.sort</code>排序</li></ul> <h2 id="concurrenthashmap"><a href="#concurrenthashmap" class="header-anchor">#</a> ConcurrentHashMap</h2> <ul><li><p>结构：我们可以将整张<code>ConcurrentHashMap</code>划分成不同的段，每个段可以看做一个<code>HashMap</code>，每个<code>HashMap</code>使用不同的锁，每个段更进一步细分就是entry即实体</p></li> <li><p><code>ConcurrentHashMap</code>的概念包含<code>ConcurrentHashMap</code>、<code>Segment</code>和<code>HashEntry</code></p></li> <li><p>读操作不需要加锁，为了确保读操作能够看到最新的值，<strong>将value设置成volatile</strong>，这避免了加锁，从而提高了读的效率</p></li> <li><p>JDK1.7版本： 容器中有多把锁，每一把锁锁一段数据，这样在多线程访问时不同段的数据时，就不会存在锁竞争了，这样便可以有效地提高并发效率。这就是ConcurrentHashMap所采用的&quot;分段锁&quot;思想</p></li> <li><p>JDK1.8版本：做了2点修改：</p> <ul><li>取消<code>segments</code>字段，直接采用<code>transient volatile HashEntry&lt;K,V&gt;[] table</code>保存数据，<strong>采用HashEntry数组元素作为锁</strong>，从而实现了对每一行数据进行加锁，<strong>并发控制使用Synchronized和CAS来操作</strong></li> <li>将之前table数组＋单向链表的数据结构，变更为table数组＋单向链表＋红黑树的结构</li></ul></li></ul> <h2 id="什么是线程池"><a href="#什么是线程池" class="header-anchor">#</a> 什么是线程池</h2> <ul><li>线程池的好处：
<ol><li>降低资源的消耗</li> <li>提高响应的速度</li> <li>方便管理</li></ol></li> <li>（重点）实现线程复用、可以控制最大并发数、易于管理线程</li> <li>三大方法：
<ol><li><code>newSingleThreadExecutor()</code>创建一个单线程化的线程池执行任务</li> <li><code>newFixedThreadPool(int nThreads)</code>创建一个固定的线程池的大小</li> <li><code>newCachedThreadPool()</code>创建缓存池，可伸缩的， 遇强则强，遇弱则弱</li></ol></li> <li>七大参数：
<ol><li><code>corePoolSize</code>：线程池中常驻线程核心线程数</li> <li><code>maximumPoolSize</code>：线程池中可容纳最大线程数</li> <li><code>workQueue</code>：阻塞队列，储存被提交但未被执行的任务，很重要，会对线程池运行产生重大影响</li> <li><code>keepAliveTime</code>：线程没有任务时最多保持多久时间终止</li> <li><code>unit</code>：<code>keepAliveTime</code>的时间单位</li> <li><code>threadFactory</code>：线程工厂，用来创建线程</li> <li><code>rejectHandler</code>：当拒绝处理任务时的策略</li></ol></li> <li>拒绝策略：当任务队列的queue满了的时候，在提交任务，就要触发拒绝策略
<ol><li><code>AbortPolicy</code>：默认策略，抛出<code>RejectedExecutionException</code></li> <li><code>DiscardPolicy</code>：忽略当前提交的任务</li> <li><code>DiscardOldestPolicy</code>：丢弃任务队列中最老的任务，给新任务腾出地方</li> <li><code>CallerRunsPolicy</code>：由提交任务者执行这个任务</li></ol></li></ul> <h2 id="redis事务的概念"><a href="#redis事务的概念" class="header-anchor">#</a> Redis事务的概念</h2> <ul><li>Redis 事务的本质是一组命令的集合。事务支持一次执行多个命令，一个事务中所有命令都会被序列化。在事务执行过程，会<strong>按照顺序串行化执行队列中的命令，其他客户端提交的命令请求不会插入到事务执行命令序列中</strong></li> <li>总结说：<strong>redis事务就是一次性、顺序性、排他性的执行一个队列中的一系列命令</strong></li></ul> <h2 id="redis的数据结构及使用场景"><a href="#redis的数据结构及使用场景" class="header-anchor">#</a> Redis的数据结构及使用场景</h2> <ul><li>Redis的数据结构有：
<ol><li>字符串：可以用来做最简单的数据缓存，可以<strong>缓存某个简单的字符串</strong>，也可以缓存<strong>某个json格式的字符串</strong>，<strong>Redis分布式锁的实现就利用了这种数据结构</strong>，还包括可以<strong>实现计数器、Session共享、分布式ID</strong></li> <li>哈希表：可以用来存储一些key-value对，更<strong>适合用来存储对象</strong></li> <li>列表: Redis的列表通过命令的组合，既可以<strong>当做栈，也可以当做队列</strong>来使用，可以用来<strong>缓存类似微信朋友圈、微博等消息流数据</strong></li> <li>集合：和列表类似，也可以存储多个元素，但是不能重复，集合<strong>可以进行交集、并集、差集操作</strong>，从而可以<strong>实现类似，我和某人共同关注的人朋友圈点赞等功能</strong></li> <li>有序集合：集合是无序的，<strong>有序集合可以设置顺序，可以用来实现排行榜功能</strong></li> <li>地理位置：用来实现位置，附近的人等功能</li> <li>基数：有可接受的小误差，用来计算访问量</li> <li>位图：统计用户信息，活跃，不活跃。登录，未登录。打卡，未打卡</li></ol></li></ul> <h2 id="redis开启多线程后-是否会存在线程并发安全问题"><a href="#redis开启多线程后-是否会存在线程并发安全问题" class="header-anchor">#</a> Redis开启多线程后，是否会存在线程并发安全问题</h2> <ul><li>Redis的<strong>多线程部分只是用来处理网络数据的读写和协议解析，执行命令仍然是单线程顺序执行</strong>。所以我们<strong>不需要去考虑</strong>控制 key、lua、事务，LPUSH/LPOP 等等的<strong>并发及线程安全问题</strong></li></ul> <h2 id="说说你了解的分布式锁实现"><a href="#说说你了解的分布式锁实现" class="header-anchor">#</a> 说说你了解的分布式锁实现</h2> <ul><li>分布式锁所要解决的问题的本质是：<strong>能够对分布在多台机器中的线程对共享资源的互斥访问</strong>。在这个原理上可以有很多的实现方式：
<ol><li>基于Mysql，分布式环境中的<strong>线程连接同一个数据库，利用数据库中的行锁来达到互斥访问</strong>，但是<strong>Mysql的加锁和释放锁的性能会比较低，不适合真正的实际生产环境</strong></li> <li>基于Zookeeper，Zookeeper中的数据是存在内存的，所以相对于Mysql性能上是适合实际环境的，并且<strong>基于Zookeeper的临时顺序节点和Watch机制能非常好的来实现的分布式锁</strong></li> <li>基于Redis，Redis中的数据也是在内存，<strong>基于Redis的消费订阅功能、数据超时时间，lua脚本等功能，也能很好的实现的分布式锁</strong></li></ol></li></ul> <h2 id="mybatis的优缺点"><a href="#mybatis的优缺点" class="header-anchor">#</a> Mybatis的优缺点</h2> <ul><li>优点：
<ol><li><strong>基于SQL语句编程，相当灵活</strong>，不会对应用程序或者数据库的现有设计造成任何影响，<strong>SQL写在XML里，解除sql与程序代码的耦合</strong>，便于统一管理；提供XML标签，<strong>支持编写动态SQL语句，并可重用</strong></li> <li>与JDBC相比，<strong>减少了50%以上的代码量，消除了JDBC大量冗余的代码</strong>，不需要手动开关连接</li> <li>很好的与各种数据库兼容 (因为MyBatis 使用JDBC来连接数据库，所以只要JDBC支持的数据库MyBatis都支持)</li> <li><strong>能够与Spring很好的集成</strong></li> <li>提供映射标签，支持对象与数据库的ORM字段关系映射;提供对象关系映射标签，支持对象关系组件维护</li></ol></li> <li>缺点：
<ol><li>SQL语句的编写工作量较大，尤其当字段多、关联表多时，对开发人员编写SQL语句的功底有一定要求</li> <li><strong>SQL语句依赖于数据库，导致数据库移植性差</strong>，不能随意更换数据库</li></ol></li></ul> <h2 id="和-的区别是什么"><a href="#和-的区别是什么" class="header-anchor">#</a> #{}和${}的区别是什么</h2> <ul><li>#{}是<strong>预编译处理、是占位符</strong>，${}是<strong>字符串替换、是拼接符</strong></li> <li>Mybatis在处理#{}时，会<strong>将sql中的#{}替换为?号，调用PreparedStatement来赋值</strong></li> <li>Mybatis在处理${}时，就是<strong>把${}替换成变量的值，调用Statement来赋值</strong></li> <li>#{}的变量替换是在DBMS中、变量替换后，#{}对应的变量自动加上单引号</li> <li>${}的变量替换是在DBMS外、变量替换后，${}对应的变量不会加上单引号</li> <li>使用**#{}可以有效的防止SQL注入**，提高系统安全性</li></ul> <h2 id="简述mybatis的插件运行原理-如何编写一个插件"><a href="#简述mybatis的插件运行原理-如何编写一个插件" class="header-anchor">#</a> 简述Mybatis的插件运行原理，如何编写一个插件</h2> <ul><li>Mybatis 只支持针对 <code>ParameterHandler</code>、<code>ResultSetHandler</code>、<code>StatementHandler</code>、<code>Executor</code>这4种接口的插件，Mybatis 使用JDK的动态代理，<strong>为需要拦截的接口生成代理对象以实现接口方法拦截功能</strong>，每当执行这4种接口对象的方法时，就会进入拦截方法，具体就是<code>InvocationHandler</code>的<code>invoke()</code>方法，拦截那些你指定需要拦截的方法</li> <li>编写插件：实现Mybatis的<code>Interceptor</code>接口并复写<code>intercept()</code>方法，然后再给插件编写注解，指定要拦截哪一个接口的哪些方法即可，在配置文件中配置编写的插件</li> <li>mybatis-plus就是实现了<code>Interceptor</code>接口并复写<code>intercept()</code>方法实现分页插件和乐观锁插件</li></ul> <h2 id="说说dubbo的分层"><a href="#说说dubbo的分层" class="header-anchor">#</a> 说说Dubbo的分层</h2> <ul><li><p>从大的范围来说，dubbo分为三层，business业务逻辑层由我们自己来提供接口和实现还有一些配置信息，RPC层就是真正的RPC调用的核心层，封装整个RPC的调用过程、负载均衡、集群容错、代理，remoting则是对网络传输协议和数据转换的封装</p></li> <li><p>划分到更细的层面，就是图中的10层模式，整个分层依赖由上至下，除开business业务逻辑之外，其他的几层都是SPI机制</p> <p><img src="/%E9%9D%A2%E8%AF%95%E9%A2%98.assets/pic_router.png" alt="pic_router"></p></li></ul> <h2 id="dubbo的工作原理"><a href="#dubbo的工作原理" class="header-anchor">#</a> Dubbo的工作原理</h2> <ul><li>服务启动的时候，生产者和消费者<strong>根据配置信息，连接到注册中心register</strong>，分别向注册中心注册和订阅服务</li> <li><strong>注册中心根据服务订阅关系，返回生产者信息到消费者</strong>，同时<strong>消费者会把生产者信息缓存到本地</strong>。如果<strong>信息有变更，消费者会收到来自注册中心的推送</strong></li> <li><strong>消费者生成代理对象，同时根据负载均衡策略，选择一台生产者</strong>，同时定时向监控中心monitor记录接口的调用次数和时间信息</li> <li><strong>拿到代理对象之后，消费者通过代理对象发起接口调用</strong></li> <li><strong>生产者收到请求后对数据进行反序列化</strong>，然后<strong>通过代理调用具体的接口实现</strong></li></ul> <h2 id="dubbo为什么要通过代理对象通信"><a href="#dubbo为什么要通过代理对象通信" class="header-anchor">#</a> Dubbo为什么要通过代理对象通信</h2> <ul><li>主要是为了<strong>实现接口的透明代理，封装调用细节</strong>，让用户可以像调用本地方法一样调用远程方法，<strong>同时还可以通过代理实现一些其他的策略</strong>，比如：
<ol><li>调用的<strong>负载均衡策略</strong></li> <li>调用<strong>失败、超时、降级和容错机制</strong></li> <li>做一些<strong>过滤操作</strong>，比如加入缓存、mock数据</li> <li>接口调用<strong>数据统计</strong></li></ol></li></ul> <h2 id="dubbo服务暴露的流程"><a href="#dubbo服务暴露的流程" class="header-anchor">#</a> Dubbo服务暴露的流程</h2> <ul><li>在<strong>容器启动的时候，解析标签、注解或配置文件</strong>，<strong>容器创建完成之后</strong>，触发ContextRefreshEvent事件回调<strong>开始暴露服务</strong></li> <li>通过ProxyFactory (代理工厂) 获取到invoker，<strong>根据配置信息组装成 URL，传入invoker对象，invoker包含了需要执行的方法的对象信息和具体的URL地址</strong></li> <li>再通过DubboProtocol的实现<strong>把包装后的invoker转换成exporter，然后启动服务器server，监听端口</strong></li> <li>最后RegistryProtocol<strong>保存URL地址和invoker的映射关系，同时注册到服务中心</strong></li></ul> <h2 id="dubbo服务引用的流程"><a href="#dubbo服务引用的流程" class="header-anchor">#</a> Dubbo服务引用的流程</h2> <ul><li>服务暴露之后，客户端就要引用服务，然后才是调用的过程</li> <li>首先<strong>客户端根据配置文件信息从注册中心订阅服务</strong></li> <li>之后DubboProtocol<strong>根据订阅的得到生产者地址和接口信息连接到服务端</strong>server，<strong>开启客户端client，然后创建invoker</strong></li> <li>invoker创建完成之后，<strong>通过invoker为服务接口生成代理对象</strong>，这个<strong>代理对象用于远程调用生产者</strong>，服务的引用就完成了</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">2021/8/1 15:39:40</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/questions/notes/base.html" class="prev">
        Java基础
      </a></span> <!----></p></div> </main></div><div class="global-ui"><APlayer audio="" fixed="true" mini="true" theme="#b7daff" loop="loop" order="random" preload="auto" volume="0.15" mutex="true" lrc-type="3" list-max-height="250" storage-name="vuepress-plugin-meting" id="aplayer-fixed"></APlayer><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;right:10px;bottom:-55px;width:135px;height:300px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2d_canvas" width="135" height="300" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:135px;height:300px;"></canvas></div></div></div>
<<<<<<< HEAD
    <script src="/assets/js/app.fbd254cd.js" defer></script><script src="/assets/js/2.64694daf.js" defer></script><script src="/assets/js/28.8645614b.js" defer></script>
=======
    <script src="/assets/js/app.ffe38b4f.js" defer></script><script src="/assets/js/2.3efcfa25.js" defer></script><script src="/assets/js/26.455cfc07.js" defer></script>
>>>>>>> ceefd0189b2bd0e88ffb3c6b673e7aa07f62c12c
  </body>
</html>
